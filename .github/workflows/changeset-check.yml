name: Changeset Check

on:
  pull_request:
    branches:
      - main
    paths:
      - 'lib/**'

jobs:
  check:
    name: Check for changeset
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Check for changeset files
        run: |
          CHANGESETS=$(find .changeset -name "*.md" ! -name "README.md" 2>/dev/null | wc -l)
          if [ "$CHANGESETS" -eq 0 ]; then
            echo "❌ No changeset found!"
            echo ""
            echo "lib/ 폴더에 변경사항이 있으면 changeset 파일이 필요합니다."
            echo "다음 명령어를 실행하세요:"
            echo ""
            echo "  npm run changeset"
            echo ""
            exit 1
          else
            echo "✅ Changeset found ($CHANGESETS file(s))"
          fi
